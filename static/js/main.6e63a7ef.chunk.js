(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{165:function(e,t,n){e.exports=n(286)},269:function(e,t,n){},271:function(e,t,n){},273:function(e,t,n){},275:function(e,t,n){},277:function(e,t,n){},283:function(e,t,n){},286:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"getCityWeather",function(){return y});var r=n(2),o=n.n(r),c=n(122),i=n.n(c),s=n(5),l=n(6),u=n(10),h=n(7),p=n(9),d=n(24),m=n(39),w="GET_CITY_WEATHER",b="GET_CITY_WEATHER_SUCCESS",f="GET_CITY_WEATHER_START",E="GET_CITY_WEATHER_ERROR";function y(e,t){return{type:w,payload:{latitude:e,longitude:t,id:"d76144444bfb6103f09bcc83ac4d7cc8"}}}var v=n(93),j=n(132),O=n.n(j),g=n(164),C=(n(269),function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.dayWeather,n=this.props.city,a=t.map(function(e){var t=e.date,n=Math.round(e.temperature-272),a=e.description;return o.a.createElement("li",{key:e.date},o.a.createElement("span",null,t," : ",o.a.createElement("strong",null,n,"C ",a)))});return o.a.createElement("div",{className:"weather-box"},o.a.createElement("div",{className:"choose-day-button"},o.a.createElement("button",{onClick:function(){e.props.onChooseDay(0)},className:"weather-button choose-day"},"24 h"),o.a.createElement("button",{onClick:function(){e.props.onChooseDay(1)},className:"weather-button choose-day"},"48 h"),o.a.createElement("button",{onClick:function(){e.props.onChooseDay(2)},className:"weather-button choose-day"},"72 h")),o.a.createElement("ul",null,a,o.a.createElement("li",{key:n.name},o.a.createElement("span",null,"city : ",o.a.createElement("strong",null,n.name?n.name:"unknown city"))),o.a.createElement("li",{key:n.country},o.a.createElement("span",null,"country : ",o.a.createElement("strong",null,n.country?n.country:"unknown country")))))}}]),t}(r.Component)),k=(n(271),function(e){return o.a.createElement("div",{className:"weather-box choose-container"},o.a.createElement("span",null,"Please, select a city"))}),W=(n(273),function(e){return o.a.createElement("div",{className:"weather-box loader"},o.a.createElement("span",{className:"spinner"}))}),T=(n(275),function(e){return o.a.createElement("div",{className:"weather-box error-container"},o.a.createElement("span",null,"Oops... Something went wrong! Try to refresh the page or select existing city"),o.a.createElement("br",null))});n(277);var x=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={showWeather:!1,chooseDay:0},n.onChooseDay=function(e){n.setState(function(t){return{chooseDay:e}})},n.onRenderWeatherContainer=function(){var e=n.props.weather.list,t=n.props.weather.city,a=n.props.weather.loaded,r=n.props.weather.loading;if(n.props.weather.error)return o.a.createElement(T,null);if(!a&&!r)return o.a.createElement(k,null);if(r)return o.a.createElement(W,null);if(a){var c=n.state.chooseDay,i=function(e){for(var t=[],n=[],a=0,r=0;a<25;a++,r++){8===r&&(r=0,t.push(n),n=[]);var o={date:e[a].dt_txt,temperature:e[a].main.temp,description:e[a].weather[0].description};n.push(o)}return t}(e).map(function(e,a){return o.a.createElement("li",{key:a},o.a.createElement(C,{dayWeather:Object(g.a)(e),onChooseDay:n.onChooseDay,city:Object(d.a)({},t)}))});return o.a.createElement("ul",null,i[c])}},n.handleClickShowWeather=function(){n.setState(function(e){return{showWeather:!e.showWeather}})},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("button",{className:"weather-button show-weather",onClick:this.handleClickShowWeather},"W"),o.a.createElement("div",{className:"weather-container"},this.state.showWeather?this.onRenderWeatherContainer():null))}}]),t}(r.Component);var R=Object(m.b)(function(e){return{weather:e.weather}})(x),N=(n(279),"pk.eyJ1IjoiYWxla3NleXRpbW9zY2hlbmtvIiwiYSI6ImNqbjh3Y2Q1azZzZW4zcHFjeXJsYnZ1MWYifQ.1QKeCXy-l6KVJFb9w4eNKg"),_=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(h.a)(t).call(this,e))).resize=function(){n.onViewportChange({width:window.innerWidth,height:window.innerHeight})},n.onViewportChange=function(e){n.setState({viewport:Object(d.a)({},n.state.viewport,e)})},n.onTransitionEnd=function(){(0,n.props.getCityWeather)(n.state.viewport.latitude,n.state.viewport.longitude)},n.state={viewport:{width:400,height:400,latitude:27.56,longitude:53.9,zoom:1},isWeatherBoxOpen:!1},n.mapRef=o.a.createRef(),n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.resize),this.resize()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.resize)}},{key:"render",value:function(){var e=this.state.viewport;return o.a.createElement(v.b,Object.assign({ref:this.mapRef},e,{onViewportChange:this.onViewportChange,onTransitionEnd:this.onTransitionEnd,mapboxApiAccessToken:N}),o.a.createElement(R,null),o.a.createElement("div",{style:{position:"absolute",right:10,top:60}},o.a.createElement(v.a,{onViewportChange:this.onViewportChange,showCompass:!1})),o.a.createElement(O.a,{mapRef:this.mapRef,onViewportChange:this.onViewportChange,mapboxApiAccessToken:N}))}}]),t}(r.Component),z=Object(m.b)(null,a)(_),S=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement(z,null)}}]),t}(r.Component),A=n(30),D={loading:!1,loaded:!1,error:!1},Y=Object(A.c)({weather:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.weather;switch(n){case f:return Object(d.a)({},e,{loading:!0,loaded:!1});case b:return Object(d.a)({},e,{loading:!1,loaded:!0},a);case E:return Object(d.a)({},e,{error:!0})}return e}}),I=n(163),V=n(41),H=n.n(V),J=n(21),G=function(e){return fetch(e).then(function(e){return e.json()})},B=H.a.mark(K);function K(e){var t,n,a,r,o;return H.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,t=e.payload,n=t.latitude,a=t.longitude,r=t.id,c.next=4,Object(J.b)({type:f});case 4:return c.next=6,Object(J.a)(G,"https://api.openweathermap.org/data/2.5/forecast?lat=".concat(n,"&lon=").concat(a,"&appid=").concat(r));case 6:return o=c.sent,c.next=9,Object(J.b)({type:b,weather:o});case 9:c.next=15;break;case 11:return c.prev=11,c.t0=c.catch(0),c.next=15,Object(J.b)({type:E});case 15:case"end":return c.stop()}},B,this,[[0,11]])}var M=H.a.mark(Q);function Q(){return H.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(J.c)(w,K);case 2:case"end":return e.stop()}},M,this)}var X=Q,Z=Object(I.a)(),F=Object(A.a)(Z),L=Object(A.d)(Y,{},F),U=L;window.store=L,Z.run(X);n(283),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(function(e){return o.a.createElement(m.a,{store:U},e.children)},null,o.a.createElement(S,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[165,2,1]]]);
//# sourceMappingURL=main.6e63a7ef.chunk.js.map